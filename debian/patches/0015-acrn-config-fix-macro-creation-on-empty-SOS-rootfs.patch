From: Helmut Buchsbaum <helmut.buchsbaum@opensource.tttech-industrial.com>
Date: Thu, 2 Jul 2020 16:05:00 +0200
Subject: acrn-config: fix macro creation on empty SOS rootfs

Signed-off-by: Helmut Buchsbaum <helmut.buchsbaum@opensource.tttech-industrial.com>
---
 misc/acrn-config/board_config/misc_cfg_h.py | 10 +++++++---
 1 file changed, 7 insertions(+), 3 deletions(-)

diff --git a/misc/acrn-config/board_config/misc_cfg_h.py b/misc/acrn-config/board_config/misc_cfg_h.py
index 81fda9f..8542310 100644
--- a/misc/acrn-config/board_config/misc_cfg_h.py
+++ b/misc/acrn-config/board_config/misc_cfg_h.py
@@ -240,13 +240,17 @@ def generate_file(config):
 
 
     # define rootfs with macro
-    for i in range(root_dev_num):
-        print('#define ROOTFS_{}\t\t"root={} "'.format(i, root_devs[i]), file=config)
+    if (len(root_devs)) > 0:
+        for i in range(root_dev_num):
+            print('#define ROOTFS_{}\t\t"root={} "'.format(i, root_devs[i]), file=config)
 
     # sos rootfs and console
     print("", file=config)
     if "SOS_VM" in common.VM_TYPES.values():
-        print('#define SOS_ROOTFS\t\t"root={} "'.format(sos_rootfs[0]), file=config)
+        if len(sos_rootfs) > 0 and len(sos_rootfs[0]) > 0:
+            print('#define SOS_ROOTFS\t\t"root={} "'.format(sos_rootfs[0]), file=config)
+        else:
+            print('#define SOS_ROOTFS', file=config)
         if ttys_n:
             print('#define SOS_CONSOLE\t\t"console={} "'.format(ttys_n), file=config)
         else:
